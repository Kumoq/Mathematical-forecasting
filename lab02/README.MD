# Цель работы и постановка задачи
Цель работы — разработать программу для оценки линейной многофакторной модели (ЛМФМ) на основе временных рядов данных. Программа должна считывать данные о целевой переменной \(y\) и факторах \(X\) из текстового файла, выполнять отбор значимых факторов, оценку адекватности модели, а также выполнять предсказания на основе введённых значений факторов.

# Краткое описание процедуры построения и оценки ЛМФМ
1. **Загрузка данных**: Считывание данных из текстового файла (например, Excel или CSV).
2. **Оценка параметров ЛМФМ**: Вычисление коэффициентов линейной модели с помощью метода наименьших квадратов.
3. **Отбор значимых факторов**: Факторы могут быть отобраны по статистической значимости (используя p-значение), по корреляции между факторами и откликом.
4. **Оценка адекватности модели**: Рассчитываются коэффициент детерминации \(R^2\), F-статистика, ошибки (E и RMSE).
5. **Предсказания**: На основе построенной модели выполняются предсказания для новых данных.

# Демонстрация работы программы
Программа считывает данные, обучает модель и делает предсказания. Пример работы программы:
- **Входные данные**: CSV или Excel файл с временными рядами.
- **Выходные данные**: Предсказанные значения, коэффициенты модели, ошибки.

# Данные 

Для работы программы был использован датасет Real Estate Valuation, описывающий цены на дома и факторы на эти цены влияющие

# Пример работы программы
/home/llemo/projects/tf217/tf217/bin/python /mnt/c/Users/llemo/Study/Математическое прогнозирование/lab02/script/lab02.py 

Функционал программы:
 1. Загрузка данных
 2. Выбор таргета
 3. Отбор значимых факторов
 4. Обучить модель
 5. Выполнить предсказание
 6. Выход

Введите номер опции: 1
Введите путь к файлу: ../data/Real estate valuation data set.xlsx
Введите формат файла (excel/csv) или нажмите Enter для использования excel по умолчанию: 
Данные успешно загружены.

Функционал программы:
 1. Загрузка данных
 2. Выбор таргета
 3. Отбор значимых факторов
 4. Обучить модель
 5. Выполнить предсказание
 6. Выход

Введите номер опции: 2
Доступные столбцы для выбора таргета:
Index(['No', 'X1 transaction date', 'X2 house age',
       'X3 distance to the nearest MRT station',
       'X4 number of convenience stores', 'X5 latitude', 'X6 longitude',
       'Y house price of unit area'],
      dtype='object')
Введите название столбца для таргета: Y house price of unit area
Целевая переменная 'Y house price of unit area' успешно выбрана.
Доступные признаки (фичи):
Index(['No', 'X1 transaction date', 'X2 house age',
       'X3 distance to the nearest MRT station',
       'X4 number of convenience stores', 'X5 latitude', 'X6 longitude'],
      dtype='object')

Функционал программы:
 1. Загрузка данных
 2. Выбор таргета
 3. Отбор значимых факторов
 4. Обучить модель
 5. Выполнить предсказание
 6. Выход

Введите номер опции: 3

Варианты отбора:
1. По статистической значимости
2. По коэффициенту корреляции - связь между факторами (между собой)
3. По коэффициенту корреляции - связь между факторами и откликом
4. Назад 

Введите номер опции: 1

Отчет о модели:
                                OLS Regression Results                                
======================================================================================
Dep. Variable:     Y house price of unit area   R-squared:                       0.583
Model:                                    OLS   Adj. R-squared:                  0.576
Method:                         Least Squares   F-statistic:                     81.21
Date:                        Wed, 11 Dec 2024   Prob (F-statistic):           3.04e-73
Time:                                17:59:46   Log-Likelihood:                -1486.5
No. Observations:                         414   AIC:                             2989.
Df Residuals:                             406   BIC:                             3021.
Df Model:                                   7                                         
Covariance Type:                    nonrobust                                         
==========================================================================================================
                                             coef    std err          t      P>|t|      [0.025      0.975]
----------------------------------------------------------------------------------------------------------
const                                  -1.404e+04   6787.785     -2.069      0.039   -2.74e+04    -699.457
No                                        -0.0036      0.004     -0.984      0.326      -0.011       0.004
X1 transaction date                        5.0819      1.558      3.261      0.001       2.018       8.146
X2 house age                              -0.2708      0.039     -7.026      0.000      -0.347      -0.195
X3 distance to the nearest MRT station    -0.0045      0.001     -6.289      0.000      -0.006      -0.003
X4 number of convenience stores            1.1293      0.188      6.000      0.000       0.759       1.499
X5 latitude                              224.6699     44.575      5.040      0.000     137.043     312.297
X6 longitude                             -14.4290     48.626     -0.297      0.767    -110.018      81.160
==============================================================================
Omnibus:                      234.131   Durbin-Watson:                   2.158
Prob(Omnibus):                  0.000   Jarque-Bera (JB):             3731.555
Skew:                           2.047   Prob(JB):                         0.00
Kurtosis:                      17.126   Cond. No.                     3.73e+07
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 3.73e+07. This might indicate that there are
strong multicollinearity or other numerical problems.

Введите уровень значимости для отсевов (например, 0.05): 0.05

Факторы с p-значениями <= 0.05:
X1 transaction date                       1.204245e-03
X2 house age                              9.027961e-12
X3 distance to the nearest MRT station    8.265466e-10
X4 number of convenience stores           4.365221e-09
X5 latitude                               7.014957e-07
dtype: float64

Признаки успешно обновлены

Хотите повторить отсев по уровню значимости (y/n)? n
Завершаем проверку значимости.

Варианты отбора:
1. По статистической значимости
2. По коэффициенту корреляции - связь между факторами (между собой)
3. По коэффициенту корреляции - связь между факторами и откликом
4. Назад 

Введите номер опции: 2

Введите порог корреляции для отсевов (например, 0.9): 0.8

Корреляционная матрица:
                                        X1 transaction date  ...  X5 latitude
X1 transaction date                                1.000000  ...     0.035016
X2 house age                                       0.017542  ...     0.054420
X3 distance to the nearest MRT station             0.060880  ...    -0.591067
X4 number of convenience stores                    0.009544  ...     0.444143
X5 latitude                                        0.035016  ...     1.000000

[5 rows x 5 columns]

Нет признаков, которые превышают заданный порог корреляции.

Хотите повторить Отбор признаков по коэффициенту корреляции (между собой) (y/n)?n
Завершаем проверку значимости.

Варианты отбора:
1. По статистической значимости
2. По коэффициенту корреляции - связь между факторами (между собой)
3. По коэффициенту корреляции - связь между факторами и откликом
4. Назад 

Введите номер опции: 3

Введите порог корреляции для отсевов (например, 0.5): 0.5

Корреляция признаков с целевой переменной:
X1 transaction date                       0.087529
X2 house age                             -0.210567
X3 distance to the nearest MRT station   -0.673613
X4 number of convenience stores           0.571005
X5 latitude                               0.546307
dtype: float64

Признаки, которые будут удалены из-за низкой корреляции с откликом: Index(['X1 transaction date', 'X2 house age'], dtype='object')

Признаки успешно обновлены.

Хотите повторить Отбор признаков по коэффициенту корреляции с откликом (y/n)?n
Завершаем проверку корреляции.

Варианты отбора:
1. По статистической значимости
2. По коэффициенту корреляции - связь между факторами (между собой)
3. По коэффициенту корреляции - связь между факторами и откликом
4. Назад 

Введите номер опции: 4

Функционал программы:
 1. Загрузка данных
 2. Выбор таргета
 3. Отбор значимых факторов
 4. Обучить модель
 5. Выполнить предсказание
 6. Выход

Введите номер опции: 4

Коэффициент детерминации R²: 0.49659753581825294
F-статистика модели: 107.52655232265
Модель адекватна.
Ошибка (E): 0.2009936507991999
RMSE: 7.988724067819271

Функционал программы:
 1. Загрузка данных
 2. Выбор таргета
 3. Отбор значимых факторов
 4. Обучить модель
 5. Выполнить предсказание
 6. Выход

Введите номер опции: 5
Введите значение для признака 'X3 distance to the nearest MRT station': 84.87882
Введите значение для признака 'X4 number of convenience stores': 10
Введите значение для признака 'X5 latitude': 24.98298
Предсказанное значение для целевой переменной: 51.84014234717635

Функционал программы:
 1. Загрузка данных
 2. Выбор таргета
 3. Отбор значимых факторов
 4. Обучить модель
 5. Выполнить предсказание
 6. Выход

Введите номер опции: 